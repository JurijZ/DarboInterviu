version: 2

workflows:
  version: 2
  build:
    jobs:
      - webapi
      
jobs:
  webapi:
    docker:
      - image: microsoft/dotnet:2.1-runtime 
    steps:
      - checkout
      - run:
            name: Install softwar to the container
            command: |
                apt-get -y -qq update
                apt-get -y -qq install tree
      - run: 
            name: Restore dependencies
            command: dotnet restore
      - run: 
            name: Build the WebAPI.Test project
            command: cd WebApi.Test && dotnet --info && dotnet build --runtime linux-x64 && tree /root/project/WebApi.Test && dotnet test
      - run: 
            name: Build the WebAPI project
            command: cd WebApi && dotnet build --configuration Release --runtime linux-x64
